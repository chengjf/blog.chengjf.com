+++
title = '唯一的短字符实践之靓号'
date = 2019-05-06T13:40:36+08:00
draft = false
comment = true
tags = ["Java"]
categories = "编程技术"
+++

上篇文章提到了生成唯一的短字符串，应用在给每个用户生成一个唯一的邀请码，这个可以扩展到给每个商品生成一个唯一的编号，给每个地点生成一个唯一的标识等等。

但是，唯一的短字符串还有另外一个场景，就是靓号，比如说QQ靓号，直播间的房间号，这些场景下，如果随机生成一些字符串可能并不如人意，需要将某些靓号整理出来，专门给运营发放。

最先想到的就是把靓号全部找出来，存储起来，然后还是按照原来的算法生成唯一短字符串，只是当随机到这些靓号的时候，重新生成，也就是要多查一次而已。

相对的，可以把非靓号存储起来，生成的时候从非靓号里取，这样避免了一次查询，这个方案的关键就是非靓号的存储，非靓号可比靓号数目大得多，使用redis还是rds需要权衡一下。（如果使用redis，可以使用set这个数据结构，使用spop进行处理）